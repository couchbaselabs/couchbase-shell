== Couchbase Commands

The following sections discuss the individual Couchbase specific commands in greater detail. Remember, you can always mix and match
them with built-in other shell commands as well as executable programs from your environment.

include::commands/buckets.adoc[]

include::commands/scopes.adoc[]

include::commands/collections.adoc[]

include::commands/doc.adoc[]

=== `nodes`

The `nodes` command allows you to list all the nodes of the cluster you are currently connected to.

[options="nowrap"]
```
> nodes
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚   cluster    â”‚       hostname       â”‚ status  â”‚         services         â”‚        version        â”‚            os             â”‚ memory_total â”‚ memory_free â”‚ capella â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ prod-us-west â”‚ 192.168.107.128:8091 â”‚ healthy â”‚ search,indexing,kv,query â”‚ 7.6.2-3505-enterprise â”‚ aarch64-unknown-linux-gnu â”‚   6201221120 â”‚  2227081216 â”‚ false   â”‚
â”‚ 1 â”‚ prod-us-west â”‚ 192.168.107.129:8091 â”‚ healthy â”‚ search,indexing,kv,query â”‚ 7.6.2-3505-enterprise â”‚ aarch64-unknown-linux-gnu â”‚   6201221120 â”‚  2204721152 â”‚ false   â”‚
â”‚ 2 â”‚ prod-us-west â”‚ 192.168.107.130:8091 â”‚ healthy â”‚ search,indexing,kv,query â”‚ 7.6.2-3505-enterprise â”‚ aarch64-unknown-linux-gnu â”‚   6201221120 â”‚  2209816576 â”‚ false   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

=== `subdoc get`
```
> subdoc get --help
Fetches the value of the provided path in the specified document through the data service

Usage:
  > subdoc get {flags} <path> (id)

Flags:
  -h, --help - Display the help message for this command
  --id-column <String> - the name of the id column if used with an input stream
  --bucket <String> - the name of the bucket
  --scope <String> - the name of the scope
  --collection <String> - the name of the collection
  --clusters <String> - the clusters which should be contacted
  --batch-size <Number> - the maximum number of items to batch send at a time
  -e, --halt-on-error - halt on any errors

Parameters:
  path <any>: the path(s) to be fetched from the documents
  id <string>: the document id (optional)
```

It can be used to retrieve a field from a single document:

```
ðŸ‘¤ Administrator ðŸ  cluster in ðŸ—„ travel-sample._default._default
> subdoc get address landmark_10019
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       id       â”‚           content           â”‚         cas         â”‚ error â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ landmark_10019 â”‚ Prince Arthur Road, ME4 4UG â”‚ 1722410659053961216 â”‚       â”‚ local   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

Or similarly to the `doc` commands a stream of ids can be provided:

```
ðŸ‘¤ Administrator ðŸ  cluster in ðŸ—„ travel-sample._default._default
> [landmark_10019 landmark_10020] | subdoc get address
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       id       â”‚           content           â”‚         cas         â”‚ error â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ landmark_10019 â”‚ Prince Arthur Road, ME4 4UG â”‚ 1722410659053961216 â”‚       â”‚ local   â”‚
â”‚ 1 â”‚ landmark_10020 â”‚ 4 High Street, ME7 1BB      â”‚ 1722410654151999488 â”‚       â”‚ local   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

The path parameter can be a list, allowing retrieval of multiple fields in one or more docs:

```
ðŸ‘¤ Administrator ðŸ  cluster in ðŸ—„ travel-sample._default._default
> [landmark_10019 landmark_10020] | subdoc get [name, address]
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       id       â”‚                  content                  â”‚         cas         â”‚ error â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ landmark_10019 â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ 1722410659053961216 â”‚       â”‚ local   â”‚
â”‚   â”‚                â”‚ â”‚ name    â”‚ Royal Engineers Museum      â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚                â”‚ â”‚ address â”‚ Prince Arthur Road, ME4 4UG â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚                â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚                     â”‚       â”‚         â”‚
â”‚ 1 â”‚ landmark_10020 â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®      â”‚ 1722410654151999488 â”‚       â”‚ local   â”‚
â”‚   â”‚                â”‚ â”‚ name    â”‚ Hollywood Bowl         â”‚      â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚                â”‚ â”‚ address â”‚ 4 High Street, ME7 1BB â”‚      â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚                â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯      â”‚                     â”‚       â”‚         â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

include::commands/query.adoc[]

include::commands/vector.adoc[]

=== `ask`

```
> ask --help
Asks a connected LLM a question, optionally enhanced with context

Usage:
  > ask {flags} <question> (context)

Flags:
  -h, --help - Display the help message for this command
  --model <String> - the chat model to ask the question

Parameters:
  question <string>: the question to be asked
  context <any>: table of strings used as context for the question (optional)
```

`ask` can be used to ask a question of the <<_cb_env_llm,active large language model>>.
It can be used to answer a standalone question:

```
> ask "What is my favourite color"
I'm sorry, but as an assistant, I don't have access to personal information about you, such as your favorite color. If you'd like to share it with me, I'd be happy to remember it for future reference!
```

Or context can be provided for the question as a list of strings.
Either as a positional parameter:

```
> ask "What is my favourite color" ["My favourite color is blue"]
Your favourite color is blue.
```

This context can also be piped into the command which allows us to ask questions about docs in our database:

```
ðŸ‘¤ Charlie ðŸ  local in ðŸ—„ travel-sample._default._default
> subdoc get content landmark_10019 | select content | ask "How much does it cost to go here?"
The admission price for an adult ticket is Â£6.99, which allows you to come back for further visits within a year. There are also tickets available for children and concessionary rates. Additionally, there is a collection of tank-mounted bridges and other outside attractions that can be seen for free. Special event weekends are included in the cost of the annual ticket.
```

Since the context can be a list we can also use `ask` to summarize the results from various documents:

```
ðŸ‘¤ Charlie ðŸ  local in ðŸ—„ travel-sample._default._default
> [landmark_10019 landmark_10020] | subdoc get content | select content | ask "what activities can I do at these places?"
At the museum on military engineering and the history of the British Empire, you can explore various exhibits related to British and military history, as well as civil engineering. Activities may include:

1. Viewing exhibits on military equipment, vehicles, weapons, and uniforms.
2. Learning about the history of the British Empire and its impact on world events.
3. Participating in guided tours to gain more in-depth knowledge.
4. Attending special event weekends with themed activities and demonstrations.
5. Exploring the outside collection of tank-mounted bridges and other military hardware.

At the new restaurant, you can enjoy the following activities:

1. Dining on a menu that features burgers and ribs.
2. Appreciating the Hollywood-style decor and ambiance.
3. Socializing with friends or family in a lively atmosphere.
4. Trying out new dishes or drinks from the restaurant's menu.
5. Relaxing and unwinding in a cozy setting after a day of exploring or sightseeing.
```

The answering of questions with supplied context can be used to easily implement <<_rag_recipe,simple RAG>>.

=== `version`

The `version` command lists the version of the Couchbase shell.

```
> version
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ version â”‚ 0.92.0 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```
