=== Exporting data

Couchbase Shell supports exporting data to a variety of formats and sources.

==== A Note On Data format

The `doc get` command exposes data as three fields; `id`, `cas`, and `content`.
The body of the document is stored within the `content` column.
If you want to only store the document body then you can use `doc get <id> | get content`.

==== To file

===== To JSON

From key-value
```
> doc get airport_3719 --bucket travel-sample
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      id      â”‚              content               â”‚         cas         â”‚ error â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_3719 â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ 1712321632867319808 â”‚       â”‚ local   â”‚
â”‚   â”‚              â”‚ â”‚ id          â”‚ 3719             â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ type        â”‚ airport          â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ airportname â”‚ Columbia Rgnl    â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ city        â”‚ Columbia         â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ country     â”‚ United States    â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ faa         â”‚ COU              â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ icao        â”‚ KCOU             â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ tz          â”‚ America/Chicago  â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ geo         â”‚ â”‚ lat â”‚ 38.82  â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â”‚ lon â”‚ -92.22 â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â”‚ alt â”‚ 889.00 â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚                     â”‚       â”‚         â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

> doc get airport_3719 | get content.0 | save mydoc.json
ðŸ‘¤ Charlie ðŸ  local
> cat mydoc.json
{
  "id": 3719,
  "type": "airport",
  "airportname": "Columbia Rgnl",
  "city": "Columbia",
  "country": "United States",
  "faa": "COU",
  "icao": "KCOU",
  "tz": "America/Chicago",
  "geo":
  {
    "lat": 38.818094,
    "lon": -92.219631,
    "alt": 889
  }
}
```

From Query/Analytics

To Single Document
[options="nowrap"]
```
>  query "SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5"
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       airportname       â”‚       city        â”‚    country    â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚         tz          â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Boeing Fld King Co Intl â”‚ Seattle           â”‚ United States â”‚ BFI â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ KBFI â”‚ 3726 â”‚ airport â”‚ America/Los_Angeles â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 21      â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 47.53   â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -122.30 â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 1 â”‚ Bray                    â”‚ Albert            â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 2 â”‚ Calais Dunkerque        â”‚ Calais            â”‚ France        â”‚ CQF â”‚        âŽ         â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 3 â”‚ Columbia Rgnl           â”‚ Columbia          â”‚ United States â”‚ COU â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚ KCOU â”‚ 3719 â”‚ airport â”‚ America/Chicago     â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 889    â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 38.82  â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -92.22 â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 4 â”‚ Couterne                â”‚ Bagnole-de-l'orne â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

> query "SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5" | save airports.json
> cat airports.json
[
  {
    "airportname": "Boeing Fld King Co Intl",
    "city": "Seattle",
    "country": "United States",
    "faa": "BFI",
    "geo":
    {
      "alt": 21,
      "lat": 47.53,
      "lon": -122.301947
    },
    "icao": "KBFI",
    "id": 3726,
    "type": "airport",
    "tz": "America/Los_Angeles",
    "cluster": "local"
  },
...
  {
    "airportname": "Couterne",
    "city": "Bagnole-de-l'orne",
    "country": "France",
    "faa": "",
    "icao": "LFAO",
    "id": 1257,
    "type": "airport",
    "tz": "Europe/Paris",
    "cluster": "local"
  }
]
```

To Multiple Documents
[options="nowrap"]
```
> query "SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5"
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       airportname       â”‚       city        â”‚    country    â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚         tz          â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Boeing Fld King Co Intl â”‚ Seattle           â”‚ United States â”‚ BFI â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ KBFI â”‚ 3726 â”‚ airport â”‚ America/Los_Angeles â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 21      â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 47.53   â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -122.30 â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 1 â”‚ Bray                    â”‚ Albert            â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 2 â”‚ Calais Dunkerque        â”‚ Calais            â”‚ France        â”‚ CQF â”‚        âŽ         â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 3 â”‚ Columbia Rgnl           â”‚ Columbia          â”‚ United States â”‚ COU â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚ KCOU â”‚ 3719 â”‚ airport â”‚ America/Chicago     â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 889    â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 38.82  â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -92.22 â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 4 â”‚ Couterne                â”‚ Bagnole-de-l'orne â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

> query "SELECT `travel-sample`.* FROM `travel-sample` WHERE `type`='airport' LIMIT 5" | each { |it| $it | save (["airport_", $it.id ,".json"] | str join) }
> ls airport*.json
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       name        â”‚ type â”‚ size  â”‚ modified â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_1254.json â”‚ file â”‚ 197 B â”‚ now      â”‚
â”‚ 1 â”‚ airport_1257.json â”‚ file â”‚ 197 B â”‚ now      â”‚
â”‚ 2 â”‚ airport_1258.json â”‚ file â”‚ 182 B â”‚ now      â”‚
â”‚ 3 â”‚ airport_3719.json â”‚ file â”‚ 284 B â”‚ now      â”‚
â”‚ 4 â”‚ airport_3726.json â”‚ file â”‚ 293 B â”‚ now      â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

===== To CSV

From key-value

[options="nowrap"]
```
> doc get airport_3719 --bucket travel-sample
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      id      â”‚              content               â”‚         cas         â”‚ error â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_3719 â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ 1712321632867319808 â”‚       â”‚ local   â”‚
â”‚   â”‚              â”‚ â”‚ id          â”‚ 3719             â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ type        â”‚ airport          â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ airportname â”‚ Columbia Rgnl    â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ city        â”‚ Columbia         â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ country     â”‚ United States    â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ faa         â”‚ COU              â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ icao        â”‚ KCOU             â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ tz          â”‚ America/Chicago  â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚ geo         â”‚ â”‚ lat â”‚ 38.82  â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â”‚ lon â”‚ -92.22 â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â”‚ alt â”‚ 889.00 â”‚ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â”‚             â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚                     â”‚       â”‚         â”‚
â”‚   â”‚              â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚                     â”‚       â”‚         â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

> doc get airport_3719 --bucket travel-sample | get content
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  id  â”‚  type   â”‚  airportname  â”‚   city   â”‚    country    â”‚ faa â”‚ icao â”‚       tz        â”‚       geo        â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ 3719 â”‚ airport â”‚ Columbia Rgnl â”‚ Columbia â”‚ United States â”‚ COU â”‚ KCOU â”‚ America/Chicago â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚   â”‚      â”‚         â”‚               â”‚          â”‚               â”‚     â”‚      â”‚                 â”‚ â”‚ lat â”‚ 38.82  â”‚ â”‚
â”‚   â”‚      â”‚         â”‚               â”‚          â”‚               â”‚     â”‚      â”‚                 â”‚ â”‚ lon â”‚ -92.22 â”‚ â”‚
â”‚   â”‚      â”‚         â”‚               â”‚          â”‚               â”‚     â”‚      â”‚                 â”‚ â”‚ alt â”‚ 889.00 â”‚ â”‚
â”‚   â”‚      â”‚         â”‚               â”‚          â”‚               â”‚     â”‚      â”‚                 â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

The `geo` column in the above data contains a `record`, which means that the data is nested.
This means that we have to flatten out the `geo` column due to limitations of the csv format.
If we try to import the content as it is then we will see:

```
> doc get airport_3719 --bucket travel-sample | get content | to csv
Error: nu::shell::cant_convert (link)

  Ã— Can't convert to CSV.
   â•­â”€[entry #25:1:1]
 1 â”‚ doc get airport_3719 --bucket travel-sample | get content | to csv
   Â· â”€â”€â”€â”¬â”€â”€â”€
   Â·    â•°â”€â”€ can't convert table<airportname: string, city: string, country: string, faa: string, geo: record<alt: float, lat: float, lon: float>, icao: string, id: int, type: string, tz: string> to CSV
   â•°â”€â”€â”€â”€
```

To flatten out the data we can simply use the `flatten` command:

[options="nowrap"]
```
> doc get airport_3719 --bucket travel-sample | get content | flatten
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  id  â”‚  type   â”‚  airportname  â”‚   city   â”‚    country    â”‚ faa â”‚ icao â”‚       tz        â”‚  lat  â”‚  lon   â”‚  alt   â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ 3719 â”‚ airport â”‚ Columbia Rgnl â”‚ Columbia â”‚ United States â”‚ COU â”‚ KCOU â”‚ America/Chicago â”‚ 38.82 â”‚ -92.22 â”‚ 889.00 â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

Which we can then pipe to save:

```
> doc get airport_3719 --bucket travel-sample | get content | flatten | save mydoc.csv
> cat mydoc.csv
id,type,airportname,city,country,faa,icao,tz,lat,lon,alt
3719,airport,Columbia Rgnl,Columbia,United States,COU,KCOU,America/Chicago,38.818094,-92.219631,889
```

From Query/Analytics

[options="nowrap"]
```
> query "SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5"
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       airportname       â”‚       city        â”‚    country    â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚         tz          â”‚ cluster â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Boeing Fld King Co Intl â”‚ Seattle           â”‚ United States â”‚ BFI â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ KBFI â”‚ 3726 â”‚ airport â”‚ America/Los_Angeles â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 21      â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 47.53   â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -122.30 â”‚ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 1 â”‚ Bray                    â”‚ Albert            â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 2 â”‚ Calais Dunkerque        â”‚ Calais            â”‚ France        â”‚ CQF â”‚        âŽ         â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â”‚ 3 â”‚ Columbia Rgnl           â”‚ Columbia          â”‚ United States â”‚ COU â”‚ â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚ KCOU â”‚ 3719 â”‚ airport â”‚ America/Chicago     â”‚ local   â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ alt â”‚ 889    â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lat â”‚ 38.82  â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â”‚ lon â”‚ -92.22 â”‚  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚   â”‚                         â”‚                   â”‚               â”‚     â”‚ â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚      â”‚      â”‚         â”‚                     â”‚         â”‚
â”‚ 4 â”‚ Couterne                â”‚ Bagnole-de-l'orne â”‚ France        â”‚     â”‚        âŽ         â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris        â”‚ local   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

Similar to the above we need to flatten out the `geo` data before we can save this to csv:

```
> query "SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5" | flatten | save mydoc.csv
> cat mydoc.csv
airportname,city,country,faa,alt,lat,lon,icao,id,type,tz,cluster
Boeing Fld King Co Intl,Seattle,United States,BFI,21,47.53,-122.301947,KBFI,3726,airport,America/Los_Angeles,local
Bray,Albert,France,,,,,LFAQ,1258,airport,Europe/Paris,local
Calais Dunkerque,Calais,France,CQF,,,,LFAC,1254,airport,Europe/Paris,local
Columbia Rgnl,Columbia,United States,COU,889,38.818094,-92.219631,KCOU,3719,airport,America/Chicago,local
Couterne,Bagnole-de-l'orne,France,,,,,LFAO,1257,airport,Europe/Paris,local
```
