=== doc

The `doc` commands are for managing the documents stored in the registered clsuters.

==== `doc get`

Gets a doc from the active cluster, bucket, scope and collection:

```
👤 Charlie 🏠 local in 🗄 travel-sample._default._default
> doc get airline_10
╭───┬────────────┬──────────────────────────────┬─────────────────────┬───────┬─────────╮
│ # │     id     │           content            │         cas         │ error │ cluster │
├───┼────────────┼──────────────────────────────┼─────────────────────┼───────┼─────────┤
│ 0 │ airline_10 │ ╭──────────┬───────────────╮ │ 1726047084573556736 │       │ local   │
│   │            │ │ id       │ 10            │ │                     │       │         │
│   │            │ │ type     │ airline       │ │                     │       │         │
│   │            │ │ name     │ 40-Mile Air   │ │                     │       │         │
│   │            │ │ iata     │ Q5            │ │                     │       │         │
│   │            │ │ icao     │ MLA           │ │                     │       │         │
│   │            │ │ callsign │ MILE-AIR      │ │                     │       │         │
│   │            │ │ country  │ United States │ │                     │       │         │
│   │            │ ╰──────────┴───────────────╯ │                     │       │         │
╰───┴────────────┴──────────────────────────────┴─────────────────────┴───────┴─────────╯
```

The contents of the document are returned in the `content` column alongside the document metadata (id, cas, error and cluster).

`doc get` can get multiple documents at once using an input stream:

```
👤 Charlie 🏠 local in 🗄 travel-sample._default._default
> [airline_10 airline_10748 airline_137] | wrap id | doc get
╭───┬───────────────┬──────────────────────────────┬─────────────────────┬───────┬──────────────╮
│ # │      id       │           content            │         cas         │ error │   cluster    │
├───┼───────────────┼──────────────────────────────┼─────────────────────┼───────┼──────────────┤
│ 0 │ airline_10    │ ╭──────────┬───────────────╮ │ 1712321628975398912 │       │ prod-us-west │
│   │               │ │ id       │ 10            │ │                     │       │              │
│   │               │ │ type     │ airline       │ │                     │       │              │
│   │               │ │ name     │ 40-Mile Air   │ │                     │       │              │
│   │               │ │ iata     │ Q5            │ │                     │       │              │
│   │               │ │ icao     │ MLA           │ │                     │       │              │
│   │               │ │ callsign │ MILE-AIR      │ │                     │       │              │
│   │               │ │ country  │ United States │ │                     │       │              │
│   │               │ ╰──────────┴───────────────╯ │                     │       │              │
│ 1 │ airline_137   │ ╭──────────┬────────────╮    │ 1712321633323712512 │       │ prod-us-west │
│   │               │ │ id       │ 137        │    │                     │       │              │
│   │               │ │ type     │ airline    │    │                     │       │              │
│   │               │ │ name     │ Air France │    │                     │       │              │
│   │               │ │ iata     │ AF         │    │                     │       │              │
│   │               │ │ icao     │ AFR        │    │                     │       │              │
│   │               │ │ callsign │ AIRFRANS   │    │                     │       │              │
│   │               │ │ country  │ France     │    │                     │       │              │
│   │               │ ╰──────────┴────────────╯    │                     │       │              │
│ 2 │ airline_10748 │ ╭──────────┬───────────────╮ │ 1712321631323947008 │       │ prod-us-west │
│   │               │ │ id       │ 10748         │ │                     │       │              │
│   │               │ │ type     │ airline       │ │                     │       │              │
│   │               │ │ name     │ Locair        │ │                     │       │              │
│   │               │ │ iata     │ ZQ            │ │                     │       │              │
│   │               │ │ icao     │ LOC           │ │                     │       │              │
│   │               │ │ callsign │ LOCAIR        │ │                     │       │              │
│   │               │ │ country  │ United States │ │                     │       │              │
│   │               │ ╰──────────┴───────────────╯ │                     │       │              │
╰───┴───────────────┴──────────────────────────────┴─────────────────────┴───────┴──────────────╯
```

`doc get` will extract the id from the `id` column, which is why you need to use https://www.nushell.sh/commands/docs/wrap.html[wrap].
But the `id` can be extracted from a different input column using the `--id-column` flag.

==== `doc import`

The simplest way to import data into the active cluster.
The data can be in any of the formats supported by the https://www.nushell.sh/commands/docs/from.html[from] command.

```
👤 Charlie 🏠 local in 🗄 default._default._default
> cat user.json
{
  "id": 123,
  "name": "Michael",
  "age": 32,
  "height": 180
}
👤 Charlie 🏠 local in 🗄 default._default._default
> doc import user.json
╭───┬───────────┬─────────┬────────┬──────────┬─────────╮
│ # │ processed │ success │ failed │ failures │ cluster │
├───┼───────────┼─────────┼────────┼──────────┼─────────┤
│ 0 │         1 │       1 │      0 │          │ local   │
╰───┴───────────┴─────────┴────────┴──────────┴─────────╯
👤 Charlie 🏠 local in 🗄 default._default._default
> doc get 123
╭───┬─────┬──────────────────────┬─────────────────────┬───────┬─────────╮
│ # │ id  │       content        │         cas         │ error │ cluster │
├───┼─────┼──────────────────────┼─────────────────────┼───────┼─────────┤
│ 0 │ 123 │ ╭────────┬─────────╮ │ 1726063078042501120 │       │ local   │
│   │     │ │ id     │ 123     │ │                     │       │         │
│   │     │ │ name   │ Michael │ │                     │       │         │
│   │     │ │ age    │ 32      │ │                     │       │         │
│   │     │ │ height │ 180     │ │                     │       │         │
│   │     │ ╰────────┴─────────╯ │                     │       │         │
╰───┴─────┴──────────────────────┴─────────────────────┴───────┴─────────╯
```

`doc import` will use the `id` field in the source document as the document key by default, but this behaviour can be changed with the `--id-column` flag.

```
👤 Charlie 🏠 local in 🗄 default._default._default
> cat user.csv
name,age,height
Michael,32,180
👤 Charlie 🏠 local in 🗄 default._default._default
> doc import user.csv --id-column name
╭───┬───────────┬─────────┬────────┬──────────┬─────────╮
│ # │ processed │ success │ failed │ failures │ cluster │
├───┼───────────┼─────────┼────────┼──────────┼─────────┤
│ 0 │         1 │       1 │      0 │          │ local   │
╰───┴───────────┴─────────┴────────┴──────────┴─────────╯
👤 Charlie 🏠 local in 🗄 default._default._default
> doc get Michael
╭───┬─────────┬──────────────────────┬─────────────────────┬───────┬─────────╮
│ # │   id    │       content        │         cas         │ error │ cluster │
├───┼─────────┼──────────────────────┼─────────────────────┼───────┼─────────┤
│ 0 │ Michael │ ╭────────┬─────────╮ │ 1726063937243250688 │       │ local   │
│   │         │ │ name   │ Michael │ │                     │       │         │
│   │         │ │ age    │ 32      │ │                     │       │         │
│   │         │ │ height │ 180     │ │                     │       │         │
│   │         │ ╰────────┴─────────╯ │                     │       │         │
╰───┴─────────┴──────────────────────┴─────────────────────┴───────┴─────────╯
```

TIP: look at the many different import formats `from` supports, including csv, xml, yaml and even sqlite.
With this simple tool at hand you are able to load many different data formats quickly and import them into Couchbase!