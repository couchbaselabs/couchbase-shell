<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="(c) Copyright 2021, All Rights Reserved">
<title>Couchbase Shell Documentation</title>
<link rel="stylesheet" href="./couchbase.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Couchbase Shell Documentation</h1>
<div class="details">
<span id="author" class="author">(c) Copyright 2021, All Rights Reserved</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_quickstart">1. Quickstart</a>
<ul class="sectlevel2">
<li><a href="#_installation">1.1. Installation</a></li>
<li><a href="#_connecting_to_a_database">1.2. Connecting to a Database</a></li>
<li><a href="#_the_config_dotfiles">1.3. The config dotfiles</a></li>
</ul>
</li>
<li><a href="#_introduction">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_navigating_the_shell">2.1. Navigating the Shell</a></li>
<li><a href="#_getting_help">2.2. Getting Help</a></li>
<li><a href="#_the_prompt_explained">2.3. The Prompt explained</a></li>
<li><a href="#_loading_data_into_the_shell">2.4. Loading Data into the Shell</a>
<ul class="sectlevel3">
<li><a href="#_doc_import">2.4.1. Doc import</a></li>
<li><a href="#_manual_import">2.4.2. Manual import</a></li>
</ul>
</li>
<li><a href="#_exporting_data_from_the_shell">2.5. Exporting Data from the Shell</a></li>
</ul>
</li>
<li><a href="#_cb_env_and_the_environment">3. <code>cb-env</code> and the Environment</a>
<ul class="sectlevel2">
<li><a href="#_per_command_execution_environments">3.1. Per command execution environments</a>
<ul class="sectlevel3">
<li><a href="#_the_databases_flag">3.1.1. The <code>--databases</code> flag</a></li>
<li><a href="#_the_bucket_scope_collection_flags">3.1.2. The <code>--bucket</code>, <code>--scope</code>, <code>--collection</code> flags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_couchbase_commands">4. Couchbase Commands</a>
<ul class="sectlevel2">
<li><a href="#_working_with_databases">4.1. Working with <code>databases</code></a></li>
<li><a href="#_working_with_buckets">4.2. Working with <code>buckets</code></a></li>
<li><a href="#_working_with_scopes_and_collections">4.3. Working with <code>scopes</code> and <code>collections</code></a>
<ul class="sectlevel3">
<li><a href="#_scopes">4.3.1. Scopes</a></li>
<li><a href="#_collections">4.3.2. Collections</a></li>
</ul>
</li>
<li><a href="#_listing_nodes">4.4. Listing <code>nodes</code></a></li>
<li><a href="#_reading_and_writing_documents">4.5. Reading and Writing `doc`uments</a>
<ul class="sectlevel3">
<li><a href="#_reading">4.5.1. Reading</a></li>
<li><a href="#_mutating">4.5.2. Mutating</a></li>
<li><a href="#_removing">4.5.3. Removing</a></li>
</ul>
</li>
<li><a href="#_version">4.6. <code>version</code></a></li>
</ul>
</li>
<li><a href="#_reference">5. Reference</a>
<ul class="sectlevel2">
<li><a href="#_config_file_format">5.1. Config File Format</a></li>
<li><a href="#_credentials_file_format">5.2. Credentials File Format</a></li>
</ul>
</li>
<li><a href="#_recipes">6. Recipes</a>
<ul class="sectlevel2">
<li><a href="#_importing_data">6.1. Importing data</a>
<ul class="sectlevel3">
<li><a href="#_a_note_on_data_format">6.1.1. A Note On Data format</a></li>
<li><a href="#_from_file">6.1.2. From file</a>
<ul class="sectlevel4">
<li><a href="#_from_json">From JSON</a></li>
<li><a href="#_from_csv">From CSV</a></li>
</ul>
</li>
<li><a href="#_modifying_data">6.1.3. Modifying data</a></li>
</ul>
</li>
<li><a href="#_exporting_data">6.2. Exporting data</a>
<ul class="sectlevel3">
<li><a href="#_a_note_on_data_format_2">6.2.1. A Note On Data format</a></li>
<li><a href="#_to_file">6.2.2. To file</a>
<ul class="sectlevel4">
<li><a href="#_to_json">To JSON</a></li>
<li><a href="#_to_csv">To CSV</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_useful_snippets">6.3. Useful snippets</a>
<ul class="sectlevel3">
<li><a href="#_migrating_scope_and_collection_definitions">6.3.1. Migrating scope and collection definitions</a></li>
<li><a href="#_migrating_query_index_definitions">6.3.2. Migrating query index definitions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_release_notes">7. Release Notes</a>
<ul class="sectlevel2">
<li><a href="#_0_75_1_2023_04_13">7.1. 0.75.1 - 2023-04-13</a></li>
<li><a href="#_0_75_0_2023_02_09">7.2. 0.75.0 - 2023-02-09</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="couchbase.svg" alt="Couchbase" width="200">
</div>
</div>
<div class="paragraph">
<p>Welcome to the Couchbase Shell <code>cbsh</code> documentation! If you are new, you will want to start with the <a href="#_quickstart">quickstart</a> section and then proceed with the <a href="#_introduction">introduction</a>. If you are already familar with the shell, feel free to jump right into the <a href="#_reference">command reference</a>.</p>
</div>
<div class="paragraph">
<p><em>Note that while the project is maintained by Couchbase, it is not covered under the EE support contract. We are providing community support through this bug tracker.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quickstart">1. Quickstart</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installation">1.1. Installation</h3>
<div class="paragraph">
<p>The current latest version is <strong>0.75</strong>. The version of <code>cbsh</code> is kept in line with the underlying version of nushell that is supported.</p>
</div>
<div class="paragraph">
<p>There are a couple ways you can get access to <code>cbsh</code>, the easiest one is to download our pre-built binaries for your platform of choice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux: <a href="https://github.com/couchbaselabs/couchbase-shell/releases/download/v0.75.1/cbsh-x86_64-unknown-linux-gnu.tar.gz">cbsh-x86_64-unknown-linux-gnu.tar.gz</a></p>
</li>
<li>
<p>macOS: <a href="https://github.com/couchbaselabs/couchbase-shell/releases/download/v0.75.1/cbsh-x86_64-apple-darwin.zip">cbsh-x86_64-apple-darwin.zip</a></p>
</li>
<li>
<p>Linux aarch64: <a href="https://github.com/couchbaselabs/couchbase-shell/releases/download/v0.75.1/cbsh-aarch64-unknown-linux-gnu.tar.gz">cbsh-aarch64-unknown-linux-gnu.tar.gz</a></p>
</li>
<li>
<p>macOS aarch64: <a href="https://github.com/couchbaselabs/couchbase-shell/releases/download/v0.75.1/cbsh-aarch64-apple-darwin.zip">cbsh-aarch64-apple-darwin.zip</a></p>
</li>
<li>
<p>Windows: <a href="https://github.com/couchbaselabs/couchbase-shell/releases/download/v0.75.1/cbsh-x86_64-pc-windows-msvc.zip">cbsh-x86_64-pc-windows-msvc.zip</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you&#8217;ve downloaded the <code>zip</code> file, extract it and switch into the just created directory.
The following example shows it for mac, but it works very similar if you are on linux (just align the commands with the file you just downloaded):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ unzip cbsh-x86_64-apple-darwin.zip
$ ls
cbsh LICENSE LICENSE_AGREEMENT  README.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now run the <code>cbsh</code> binary:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>â¯ ./cbsh --version
The Couchbase Shell 0.75.1</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you are running a recent macOS release (i.e. 10.15.x), you&#8217;ll likely see an error similar to <strong>"cbsh" was blocked from use because it is not from an identified developer</strong>.
This is because our binaries are not yet signed.
To run it nonetheless you need to either navigate to <code>System Preferences &#8594; Security &amp; Privacy</code> and click <code>Allow Anyway</code>, or  run <code>sudo xattr -r -d com.apple.quarantine $PWD/cbsh</code> inside your terminal.
Next time you run the binary you&#8217;ll get another prompt but then it should run fine.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="mac-binary-unsigned.png" alt="macOS Warning" width="600">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_to_a_database">1.2. Connecting to a Database</h3>
<div class="paragraph">
<p>The first time that you run <code>./cbsh</code> you will receive a prompt asking if you&#8217;d like to create a config file.
If you choose yes then the shell will provide you with a series of prompts to provide information about your default database.
If you choose no then it will try to connect to <code>localhost</code> using the <code>Administrator</code> username and the <code>password</code> password.</p>
</div>
<div class="paragraph">
<p>You can modify this through CLI arguments (see <code>./cbsh -h</code> for more information).</p>
</div>
<div class="paragraph">
<p>Note: Unless you specify TLS settings then PLAIN authentication is used and your credentials are sent in plaintext.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>â¯ ./cbsh --username Administrator --connstr 127.0.0.1 -p
Password:
[WARN] 2023-04-14 08:32:25.180 Using PLAIN authentication for cluster dev.local, credentials will sent in plaintext - configure tls to disable this warning
[INFO] 2023-04-14 08:32:25.389 Thanks for trying CBSH!
ğŸ‘¤ Administrator ğŸ  dev.local in ğŸ—„ default
&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once in the shell, you can start to execute commands (see the introduction section for more information).
As a quick sanity check, list the nodes in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; nodes
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  cluster  â”‚    hostname    â”‚ status  â”‚         services         â”‚        version        â”‚            os             â”‚ memory_total â”‚ memory_free â”‚ capella â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ dev.local â”‚ 127.0.0.1:8091 â”‚ healthy â”‚ search,indexing,kv,query â”‚ 8.0.0-1246-enterprise â”‚ x86_64-apple-darwin19.6.0 â”‚  34359738368 â”‚ 12026126336 â”‚ false   â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you have the <code>travel-sample</code> bucket installed you can switch to it and then fetch a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt;  doc get airline_10 --bucket travel-sample | flatten
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # â”‚     id     â”‚         cas         â”‚ content_id â”‚  type   â”‚    name     â”‚ iata â”‚ icao â”‚ callsign â”‚    country    â”‚ error â”‚ database
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ airline_10 â”‚ 1629809626107281408 â”‚         10 â”‚ airline â”‚ 40-Mile Air â”‚ Q5   â”‚ MLA  â”‚ MILE-AIR â”‚ United States â”‚       â”‚ default
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_config_dotfiles">1.3. The config dotfiles</h3>
<div class="paragraph">
<p>Connecting to a single database through the command line is nice when you are starting out, but later on you will likely either connect to the same database all the time or even to a multitude of them. To help with this, you can create a <code>.cbsh</code> dot folder in your home directory and place a <code>config</code> file in it that the shell will read on startup.</p>
</div>
<div class="paragraph">
<p>The downloaded zip contains an example already, but here is a small sample config to help you get started as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>version = 1

[[database]]
identifier = &quot;local&quot;
connstr = &quot;127.0.0.1&quot;
default-bucket = &quot;travel-sample&quot;
username = &quot;Administrator&quot;
password = &quot;password&quot;

[[database]]
identifier = &quot;remote&quot;
connstr = &quot;10.143.200.101&quot;
default-bucket = &quot;myapp&quot;
username = &quot;user&quot;
password = &quot;pass&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will register two databases, one called <code>local</code> and one called <code>remote</code>.
The file format is <code>toml</code> in case you wonder.
Now when you start the shell, it will connect to <code>local</code> automatically and you are all set.</p>
</div>
<div class="paragraph">
<p>Please check out the reference section on additional parameters you can set as well as how to move the credentials to a separate <code>credentials</code> file in case you want to share your config with other people and they do not use the same credentials.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">2. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Shell is fully featured, so it does not only contain commands related to couchbase but is actually built on top of a general purpose shell called <a href="https://www.nushell.sh/">nushell</a>. This allows you to interact with the file system or any other command available on your machine, making it a great tool for both operational and development tasks on top of Couchbase.</p>
</div>
<div class="paragraph">
<p>The following introduction only touches on the basic concepts to make you productive quickly. We recommend also checking out the great <a href="https://www.nushell.sh/book">nushell documentation</a> so you can get the most out of it.</p>
</div>
<div class="sect2">
<h3 id="_navigating_the_shell">2.1. Navigating the Shell</h3>
<div class="paragraph">
<p>Commands take inputs and produce output in a structured manner, most often represented as tables. Note how both the generic <code>ls</code> command and the couchbase-specific <code>buckets</code> command both produce a table as their output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; ls
â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 #  â”‚     name     â”‚ type â”‚   size   â”‚    modified
â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  0 â”‚ CHANGELOG.md â”‚ File â”‚   4.8 KB â”‚ 2 hours ago
  1 â”‚ Cargo.lock   â”‚ File â”‚ 170.2 KB â”‚ 16 minutes ago
  2 â”‚ Cargo.toml   â”‚ File â”‚   1.8 KB â”‚ 16 minutes ago
  3 â”‚ LICENSE      â”‚ File â”‚  11.4 KB â”‚ 2 days ago
  4 â”‚ README.md    â”‚ File â”‚   8.6 KB â”‚ 9 minutes ago
  5 â”‚ docs         â”‚ Dir  â”‚    544 B â”‚ 2 days ago
  6 â”‚ examples     â”‚ Dir  â”‚    192 B â”‚ 2 days ago
  7 â”‚ jupyter      â”‚ Dir  â”‚    128 B â”‚ 2 days ago
  8 â”‚ src          â”‚ Dir  â”‚    256 B â”‚ 2 days ago
  9 â”‚ target       â”‚ Dir  â”‚    224 B â”‚ 32 minutes ago
 10 â”‚ tests        â”‚ Dir  â”‚    224 B â”‚ 2 days ago
â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€
 # â”‚ database â”‚     name      â”‚   type    â”‚ replicas â”‚ min_durability_level â”‚ ram_quota â”‚ flush_enabled â”‚ status â”‚ cloud
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ default  â”‚ beer-sample   â”‚ couchbase â”‚        1 â”‚ none                 â”‚  209.7 MB â”‚ false         â”‚        â”‚ false
 1 â”‚ default  â”‚ default       â”‚ couchbase â”‚        1 â”‚ none                 â”‚  104.9 MB â”‚ true          â”‚        â”‚ false
 2 â”‚ default  â”‚ targetBucket  â”‚ couchbase â”‚        0 â”‚ none                 â”‚  104.9 MB â”‚ true          â”‚        â”‚ false
 3 â”‚ default  â”‚ travel-sample â”‚ couchbase â”‚        1 â”‚ none                 â”‚  209.7 MB â”‚ false         â”‚        â”‚ false
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can pipe the output into other commands, for example if you only want to see buckets that have <code>sample</code> in their name you can utilize the <code>where</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets | where name =~ &quot;sample&quot;
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€
 # â”‚ database â”‚     name      â”‚   type    â”‚ replicas â”‚ min_durability_level â”‚ ram_quota â”‚ flush_enabled â”‚ status â”‚ cloud
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ default  â”‚ beer-sample   â”‚ couchbase â”‚        1 â”‚ none                 â”‚  209.7 MB â”‚ false         â”‚        â”‚ false
 1 â”‚ default  â”‚ travel-sample â”‚ couchbase â”‚        1 â”‚ none                 â”‚  209.7 MB â”‚ false         â”‚        â”‚ false
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a similar fashion you can turn this structured table into other output formats, for example JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets | where name =~ &quot;sample&quot; | to json --pretty 2
[
  {
    &quot;database&quot;: &quot;default&quot;,
    &quot;name&quot;: &quot;beer-sample&quot;,
    &quot;type&quot;: &quot;couchbase&quot;,
    &quot;replicas&quot;: 1,
    &quot;min_durability_level&quot;: &quot;none&quot;,
    &quot;ram_quota&quot;: 209715200,
    &quot;flush_enabled&quot;: false,
    &quot;status&quot;: &quot;&quot;,
    &quot;cloud&quot;: false
  },
  {
    &quot;database&quot;: &quot;default&quot;,
    &quot;name&quot;: &quot;travel-sample&quot;,
    &quot;type&quot;: &quot;couchbase&quot;,
    &quot;replicas&quot;: 1,
    &quot;min_durability_level&quot;: &quot;none&quot;,
    &quot;ram_quota&quot;: 209715200,
    &quot;flush_enabled&quot;: false,
    &quot;status&quot;: &quot;&quot;,
    &quot;cloud&quot;: false
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exactly this type of composition takes the unix philosophy of "do one thing well" and meshes it together with the idea of flexible structured pipelines. This allows to build powerful compositions that help you in your daily operations with Couchbase, both from a developer or operations point of view.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_help">2.2. Getting Help</h3>
<div class="paragraph">
<p>Other than using this documentation for help, each command can be called with <code>-h</code> or <code>--help</code> to get information about potential flags, arguments and subcommands. Also, some commands provide additional examples.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets -h
Perform bucket management operations

Usage:
  &gt; buckets &lt;subcommand&gt; {flags}

Subcommands:
  buckets config - Shows the bucket config (low level)
  buckets create - Creates a bucket
  buckets drop - Drops buckets through the HTTP API
  buckets flush - Flushes buckets through the HTTP API
  buckets get - Fetches buckets through the HTTP API
  buckets load-sample - Load a sample bucket
  buckets update - Updates a bucket

Flags:
  -h, --help: Display this help message
  --databases &lt;string&gt;: the databases which should be contacted</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some commands (like the one above) only act as groupings for subcommands, like <code>from</code>, <code>to</code> or <code>doc</code>. Since they do not serve a purpose on their own, they will render their help output automatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc
Perform document operations against a bucket or collection

Usage:
  &gt; doc &lt;subcommand&gt; {flags}

Subcommands:
  doc get - Fetches a document through the data service
  doc insert - Insert a document through the data service
  doc remove - Removes a document through the data service
  doc replace - Replace a document through the data service
  doc upsert - Upsert (insert or override) a document through the data service

Flags:
  -h, --help: Display this help message</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_prompt_explained">2.3. The Prompt explained</h3>
<div class="paragraph">
<p>Couchbase Shell uses a custom, two line prompt to show you exactly in what environment you are working in right now. Since you can connect to different databases, switch buckets etc. it is important to know what is currently "active". Here is a sample prompt that will greet you when starting the shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>ğŸ‘¤ Administrator at ğŸ  local in ğŸ—„ travel-sample
&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It tells you that your user is <code>Administrator</code>, the current active database identifier is <code>local</code> and the active bucket is <code>travel-sample</code>.</p>
</div>
<div class="paragraph">
<p>If you have an active scope or collection set then the prompt will also update to reflect that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>ğŸ‘¤ Administrator ğŸ  dev.local in ğŸ—„ travel-sample.myscope.mycollection
&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the second line, your actual user prompt starts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_loading_data_into_the_shell">2.4. Loading Data into the Shell</h3>
<div class="paragraph">
<p>If you want to import data into Couchbase, or just load it into the shell for further processing, there are different commands available to help you.
Once the data is loaded into the shell it can be sent to one of the couchbase save commands like <code>doc upsert</code> and <code>doc import</code>.
Depending on the structure of the data, and the command used, you may also need to tweak it a little bit so it can be properly stored.</p>
</div>
<div class="sect3">
<h4 id="_doc_import">2.4.1. Doc import</h4>
<div class="paragraph">
<p>The <code>doc import</code> is the simplest way to import data through Couchbase Shell.
The command expects a path to file containing data, the data can be any of the formats supported by the <code>from</code> command.
In the following example we import a json file containing a single document.
We also specify the <code>--id-column</code> flag because <code>doc import</code> will try to use an <code>id</code> field for the document key by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat user.json
{
  &quot;name&quot;: &quot;Michael&quot;,
  &quot;age&quot;: 32,
  &quot;height&quot;: 180
}

&gt; doc import user.json --id-column name
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc import -h
Import documents from a file through the data service

Usage:
  &gt; doc import {flags} &lt;filename&gt;

Flags:
  -h, --help - Display the help message for this command
  --id-column &lt;String&gt; - the name of the id column if used with an input stream
  --bucket &lt;String&gt; - the name of the bucket
  --expiry &lt;Number&gt; - the expiry for the documents in seconds, or absolute
  --scope &lt;String&gt; - the name of the scope
  --collection &lt;String&gt; - the name of the collection
  --clusters &lt;String&gt; - the clusters which should be contacted
  --batch-size &lt;Number&gt; - the maximum number of items to batch send at a time

Parameters:
  filename &lt;string&gt;: the path to the file containing data to import</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manual_import">2.4.2. Manual import</h4>
<div class="paragraph">
<p>The <code>open</code> command will look at file endings and try to decode it automatically.
Imagine a file named <code>user.json</code> in your current directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat user.json
{
  &quot;name&quot;: &quot;Michael&quot;,
  &quot;age&quot;: 32,
  &quot;height&quot;: 180
}

&gt; open user.json
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ name   â”‚ Michael â”‚
â”‚ age    â”‚ 32      â”‚
â”‚ height â”‚ 180     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the <code>open</code> command automatically decoded the JSON document into the tabular format.
If the filename would only be <code>user</code>, the import would look like this instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open user
{
  &quot;name&quot;: &quot;Michael&quot;,
  &quot;age&quot;: 32,
  &quot;height&quot;: 180
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are dealing with data that cannot be decoded automatically, you can use the various <code>from</code> subcommands to help with decoding.
In our case we use <code>from json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open user | from json
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ name   â”‚ Michael â”‚
â”‚ age    â”‚ 32      â”‚
â”‚ height â”‚ 180     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
look at the many different import formats <code>from</code> supports, including csv, xml, yaml and even sqlite. With this simple tool at hand you are able to load many different data formats quickly and import them into couchbase!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We cannot use this format directly with commands like <code>doc upsert</code> as the command expects two "columns" in the data - id and content.
This means that we have to perform some translation from the above format to one that <code>doc upsert</code> understands.
To do this we <code>wrap</code> the entire document into a content column and then extract the id that we want to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open user.json | wrap content | insert id {|it| echo $it.content.name}
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ content â”‚ {record 3 fields} â”‚
â”‚ id      â”‚ Michael           â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are many other approaches to achieving this same result.
With our data in the correct format we can then upsert:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open user.json | wrap content | insert id {|it| echo $it.content.name} | doc upsert
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#">Importing data recipes</a> for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exporting_data_from_the_shell">2.5. Exporting Data from the Shell</h3>
<div class="paragraph">
<p>The export counterparts to <code>open</code> and <code>from</code>, are <code>save</code> and <code>to</code>.
You can use both commands to take tabular data from the shell and store it in files of the needed target format.</p>
</div>
<div class="paragraph">
<p>Like <code>open</code>, <code>save</code> will try to discern the format from the file ending.
The following example will load a JSON file and then save it as CSV:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat user.json
{
  &quot;name&quot;: &quot;Michael&quot;,
  &quot;age&quot;: 32,
  &quot;height&quot;: 180
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open user.json | save user.csv</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat user.csv
name,age,height
Michael,32,180</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example is dealing with only one row for simplicity, but you can save as many rows as you need in one file.</p>
</div>
<div class="paragraph">
<p>As a motivating example, the following snippet runs a N1QL query and stores the result as a csv file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; query &quot;select airportname,city,country from `travel-sample` where type = 'airport' limit 10&quot; | save output.csv</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat output.csv
airportname,city,country
Calais Dunkerque,Calais,France
Peronne St Quentin,Peronne,France
Les Loges,Nangis,France
Couterne,Bagnole-de-l'orne,France
Bray,Albert,France
Le Touquet Paris Plage,Le Tourquet,France
Denain,Valenciennes,France
Glisy,Amiens,France
La Garenne,Agen,France
Cazaux,Cazaux,France</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#">Exporting data recipes</a> for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cb_env_and_the_environment">3. <code>cb-env</code> and the Environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whilst multiple databases can be registered at the same time, there is only ever one database (at most) active.
The same is true for buckets, scopes, and collections.
When a resource is active then it used as the default to run commands against (this can be overridden on a per command basis).</p>
</div>
<div class="paragraph">
<p>You can run the <code>cb-env</code> command, which will tell you which resources are currently active (you are also able to tell from the prompt):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ username     â”‚ charlie     â”‚
â”‚ display_name â”‚ Charlie     â”‚
â”‚ database     â”‚ capella     â”‚
â”‚ bucket       â”‚ default     â”‚
â”‚ scope        â”‚ inventory   â”‚
â”‚ collection   â”‚ hotel       â”‚
â”‚ cluster_type â”‚ provisioned â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you were to now run a command then we would be running it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>As the user "charlie"</p>
</li>
<li>
<p>Against the "capella" database</p>
</li>
<li>
<p>Against the "default" bucket</p>
</li>
<li>
<p>Against the "inventory" scope</p>
</li>
<li>
<p>Against the "hotel" collection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Npte that <code>display_name</code> is the name that appears in your shell prompt and is not used by commands.</p>
</div>
<div class="paragraph">
<p>You can also change the active resources with the <code>cb-env</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env -h
Modify the default execution environment of commands

Usage:
  &gt; cb-env {flags}

Subcommands:
  cb-env bucket - Sets the active bucket based on its name
  cb-env capella-organization - Sets the active capella organization based on its identifier
  cb-env collection - Sets the active collection based on its name
  cb-env database - Sets the active database based on its identifier
  cb-env managed - Lists all databases currently managed by couchbase shell
  cb-env project - Sets the active project based on its name
  cb-env register - Registers a database for use with the shell
  cb-env scope - Sets the active scope based on its name
  cb-env timeouts - Sets the active timeouts for operations
  cb-env unregister - Registers a database for use with the shell

Flags:
  -h, --help - Display the help message for this command
  --capella - show default execution environment of capella
  --timeouts - show default execution environment for timeouts</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example if you change the active bucket:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env bucket beer-sample
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ bucket â”‚ beer-sample â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ username     â”‚ charlie     â”‚
â”‚ display_name â”‚ Charlie     â”‚
â”‚ database     â”‚ capella     â”‚
â”‚ bucket       â”‚ beer-sample â”‚
â”‚ scope        â”‚ inventory   â”‚
â”‚ collection   â”‚ hotel       â”‚
â”‚ cluster_type â”‚ provisioned â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both the output of <code>cb-env</code> and the prompt will reflect the changes.</p>
</div>
<div class="sect2">
<h3 id="_per_command_execution_environments">3.1. Per command execution environments</h3>
<div class="paragraph">
<p>On many commands you will notice a set of flags which allow you to override the active execution environment.
Different commands support different flags, depending on the command you can expect to see any of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--databases</code></p>
</li>
<li>
<p><code>--bucket</code></p>
</li>
<li>
<p><code>--scope</code></p>
</li>
<li>
<p><code>--collection</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_the_databases_flag">3.1.1. The <code>--databases</code> flag</h4>
<div class="paragraph">
<p>The argument for this flag is an identifier combined with a regular expression.
So imagine you have three databases setup with the following names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env | get database
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ prod-us-west
 1 â”‚ prod-us-east
 2 â”‚ prod-eu-center
 3 â”‚ local-test
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wanted to run a command against all databases in <code>prod-us</code>, you could use <code>--databases prod-us.*</code>, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets --databases prod-us.*
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€
 # â”‚   database   â”‚     name      â”‚   type    â”‚ replicas â”‚ min_durability_level â”‚ ram_quota â”‚ flush_enabled â”‚ status â”‚ capella
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ prod-us-east â”‚ default       â”‚ couchbase â”‚        1 â”‚ none                 â”‚  268.4 MB â”‚ false         â”‚        â”‚ false
 1 â”‚ prod-us-west â”‚ default       â”‚ couchbase â”‚        1 â”‚ none                 â”‚  268.4 MB â”‚ false         â”‚        â”‚ false
 2 â”‚ prod-us-west â”‚ travel-sample â”‚ couchbase â”‚        1 â”‚ none                 â”‚  209.7 MB â”‚ false         â”‚        â”‚ false
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the background this gets passed to a regex engine, so you can go a little crazy with it if needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_bucket_scope_collection_flags">3.1.2. The <code>--bucket</code>, <code>--scope</code>, <code>--collection</code> flags</h4>
<div class="paragraph">
<p>These flags are a little different to the <code>--databases</code> flag, they are not regular expressions and can only be used to define a single name each.
Unlike <code>--databases</code> the name provided to these flags does not have to be already known to Couchbase Shell, they can refer to any bucket, scope, and collection that exist within your active database or defined database(s).
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get 1 --bucket travel-sample --scope tenant_agent_00 --collection users
â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # â”‚ id â”‚         cas         â”‚     content      â”‚ error â”‚   database
â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ 1  â”‚ 1638870288919035904 â”‚ [row 11 columns] â”‚       â”‚ prod-us-west
â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_couchbase_commands">4. Couchbase Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections discuss the individual couchbase specific commands in greater detail. Remember, you can always mix and match them with built-in other shell commands as well as executables from your environment.</p>
</div>
<div class="sect2">
<h3 id="_working_with_databases">4.1. Working with <code>databases</code></h3>
<div class="paragraph">
<p>The <code>cb-env managed</code> command lists all the databases you have registered with the shell.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cb-env managed
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ active â”‚  tls  â”‚ identifier â”‚   username    â”‚ capella_organization â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ true   â”‚ false â”‚ dev.local  â”‚ Administrator â”‚                      â”‚
â”‚ 1 â”‚ false  â”‚ true  â”‚ capella    â”‚ charlie       â”‚                      â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_buckets">4.2. Working with <code>buckets</code></h3>
<div class="paragraph">
<p>The <code>buckets</code> command lists all the buckets from your active database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  cluster  â”‚    name     â”‚   type    â”‚ replicas â”‚ min_durability_level â”‚ ram_quota â”‚ flush_enabled â”‚ status â”‚ cloud â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ dev.local â”‚ beer-sample â”‚ couchbase â”‚        2 â”‚ none                 â”‚ 412.0 MiB â”‚ false         â”‚        â”‚ false â”‚
â”‚ 1 â”‚ dev.local â”‚ default     â”‚ couchbase â”‚        0 â”‚ none                 â”‚ 512.0 MiB â”‚ false         â”‚        â”‚ false â”‚
â”‚ 2 â”‚ dev.local â”‚ memd        â”‚ memcached â”‚        0 â”‚ none                 â”‚ 100.0 MiB â”‚ false         â”‚        â”‚ false â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>As an advanced command, it is also possible to get the configuration for a bucket:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; buckets config default
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ authType               â”‚ sasl                                                                                 â”‚
â”‚ autoCompactionSettings â”‚ false                                                                                â”‚
â”‚ basicStats             â”‚ {record 8 fields}                                                                    â”‚
â”‚ bucketCapabilities     â”‚ [list 17 items]                                                                      â”‚
â”‚ bucketCapabilitiesVer  â”‚                                                                                      â”‚
â”‚ bucketType             â”‚ membase                                                                              â”‚
â”‚ collectionsManifestUid â”‚ 21                                                                                   â”‚
â”‚ compressionMode        â”‚ passive                                                                              â”‚
â”‚ conflictResolutionType â”‚ seqno                                                                                â”‚
â”‚ controllers            â”‚ {record 4 fields}                                                                    â”‚
â”‚ ddocs                  â”‚ {record 1 field}                                                                     â”‚
â”‚ durabilityMinLevel     â”‚ none                                                                                 â”‚
â”‚ evictionPolicy         â”‚ valueOnly                                                                            â”‚
â”‚ localRandomKeyUri      â”‚ /pools/default/buckets/default/localRandomKey                                        â”‚
â”‚ maxTTL                 â”‚ 0                                                                                    â”‚
â”‚ name                   â”‚ default                                                                              â”‚
â”‚ nodeLocator            â”‚ vbucket                                                                              â”‚
â”‚ nodes                  â”‚ [table 1 row]                                                                        â”‚
â”‚ numVBuckets            â”‚ 64                                                                                   â”‚
â”‚ pitrEnabled            â”‚ false                                                                                â”‚
â”‚ pitrGranularity        â”‚ 600                                                                                  â”‚
â”‚ pitrMaxHistoryAge      â”‚ 86400                                                                                â”‚
â”‚ quota                  â”‚ {record 2 fields}                                                                    â”‚
â”‚ replicaIndex           â”‚ false                                                                                â”‚
â”‚ replicaNumber          â”‚ 0                                                                                    â”‚
â”‚ stats                  â”‚ {record 3 fields}                                                                    â”‚
â”‚ storageBackend         â”‚ couchstore                                                                           â”‚
â”‚ streamingUri           â”‚ /pools/default/bucketsStreaming/default?bucket_uuid=0ef162c33e14b163630f04639b347937 â”‚
â”‚ threadsNumber          â”‚ 3                                                                                    â”‚
â”‚ uri                    â”‚ /pools/default/buckets/default?bucket_uuid=0ef162c33e14b163630f04639b347937          â”‚
â”‚ uuid                   â”‚ 0ef162c33e14b163630f04639b347937                                                     â”‚
â”‚ vBucketServerMap       â”‚ {record 4 fields}                                                                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are unsure what you would use this for, you probably don&#8217;t need it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_scopes_and_collections">4.3. Working with <code>scopes</code> and <code>collections</code></h3>
<div class="paragraph">
<p>The <code>scopes</code> and <code>collections</code> commands can be used for managing scopes and collection respectively.</p>
</div>
<div class="sect3">
<h4 id="_scopes">4.3.1. Scopes</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; scopes -h
Fetches scopes through the HTTP API

Usage:
  &gt; scopes &lt;subcommand&gt; {flags}

Subcommands:
  scopes create - Creates scopes through the HTTP API
  scopes drop - Deletes scopes through the HTTP API

Flags:
  -h, --help: Display this help message
  --bucket &lt;string&gt;: the name of the bucket
  --databases &lt;string&gt;: the databases to query against</code></pre>
</div>
</div>
<div class="paragraph">
<p>To list all scopes in the bucket you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; scopes
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      scope      â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ inventory       â”‚ dev.local â”‚
â”‚ 1 â”‚ tenant_agent_00 â”‚ dev.local â”‚
â”‚ 2 â”‚ tenant_agent_01 â”‚ dev.local â”‚
â”‚ 3 â”‚ tenant_agent_02 â”‚ dev.local â”‚
â”‚ 4 â”‚ tenant_agent_03 â”‚ dev.local â”‚
â”‚ 5 â”‚ tenant_agent_04 â”‚ dev.local â”‚
â”‚ 6 â”‚ _default        â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create and remove scopes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; scopes create tenant_agent_05
&gt; scopes
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      scope      â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ tenant_agent_05 â”‚ dev.local â”‚
â”‚ 1 â”‚ inventory       â”‚ dev.local â”‚
â”‚ 2 â”‚ tenant_agent_00 â”‚ dev.local â”‚
â”‚ 3 â”‚ tenant_agent_01 â”‚ dev.local â”‚
â”‚ 4 â”‚ tenant_agent_02 â”‚ dev.local â”‚
â”‚ 5 â”‚ tenant_agent_03 â”‚ dev.local â”‚
â”‚ 6 â”‚ tenant_agent_04 â”‚ dev.local â”‚
â”‚ 7 â”‚ _default        â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; scopes drop tenant_agent_05
&gt; scopes
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      scope      â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ inventory       â”‚ dev.local â”‚
â”‚ 1 â”‚ tenant_agent_00 â”‚ dev.local â”‚
â”‚ 2 â”‚ tenant_agent_01 â”‚ dev.local â”‚
â”‚ 3 â”‚ tenant_agent_02 â”‚ dev.local â”‚
â”‚ 4 â”‚ tenant_agent_03 â”‚ dev.local â”‚
â”‚ 5 â”‚ tenant_agent_04 â”‚ dev.local â”‚
â”‚ 6 â”‚ _default        â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_collections">4.3.2. Collections</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; collections -h
Fetches collections through the HTTP API

Usage:
  &gt; collections &lt;subcommand&gt; {flags}

Subcommands:
  collections create - Creates collections through the HTTP API
  collections drop - Deletes collections through the HTTP API

Flags:
  -h, --help: Display this help message
  --bucket &lt;string&gt;: the name of the bucket
  --scope &lt;string&gt;: the name of the scope
  --databases &lt;string&gt;: the databases to query against</code></pre>
</div>
</div>
<div class="paragraph">
<p>To list all collection in the bucket you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; collections
â•­â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  # â”‚      scope      â”‚ collection â”‚ max_expiry â”‚  cluster  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0 â”‚ inventory       â”‚ landmark   â”‚       0sec â”‚ dev.local â”‚
â”‚  1 â”‚ inventory       â”‚ hotel      â”‚       0sec â”‚ dev.local â”‚
â”‚  2 â”‚ inventory       â”‚ airport    â”‚       0sec â”‚ dev.local â”‚
â”‚  3 â”‚ inventory       â”‚ airline    â”‚       0sec â”‚ dev.local â”‚
â”‚  4 â”‚ inventory       â”‚ route      â”‚       0sec â”‚ dev.local â”‚
â”‚  5 â”‚ tenant_agent_00 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚  6 â”‚ tenant_agent_00 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â”‚  7 â”‚ tenant_agent_01 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â”‚  8 â”‚ tenant_agent_01 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚  9 â”‚ tenant_agent_02 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â”‚ 10 â”‚ tenant_agent_02 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚ 11 â”‚ tenant_agent_03 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â”‚ 12 â”‚ tenant_agent_03 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚ 13 â”‚ tenant_agent_04 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â”‚ 14 â”‚ tenant_agent_04 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚ 15 â”‚ _default        â”‚ _default   â”‚       0sec â”‚ dev.local â”‚
â•°â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create and remove collections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; collections create staff --scope tenant_agent_00
&gt; collections --scope tenant_agent_00
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      scope      â”‚ collection â”‚ max_expiry â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ tenant_agent_00 â”‚ staff      â”‚       0sec â”‚ dev.local â”‚
â”‚ 1 â”‚ tenant_agent_00 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚ 2 â”‚ tenant_agent_00 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; collections drop staff --scope tenant_agent_00
&gt; collections --scope tenant_agent_00
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      scope      â”‚ collection â”‚ max_expiry â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ tenant_agent_00 â”‚ bookings   â”‚       0sec â”‚ dev.local â”‚
â”‚ 1 â”‚ tenant_agent_00 â”‚ users      â”‚       0sec â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listing_nodes">4.4. Listing <code>nodes</code></h3>
<div class="paragraph">
<p>The <code>nodes</code> command allows you to list all the nodes of the database you are currently connected to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; nodes
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # â”‚ database â”‚ hostname            â”‚ status  â”‚ services          â”‚ version               â”‚ os                       â”‚ memory_total â”‚ memory_free
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ remote   â”‚ 10.143.200.101:8091 â”‚ healthy â”‚ indexing,kv,query â”‚ 6.5.0-4960-enterprise â”‚ x86_64-unknown-linux-gnu â”‚       2.1 GB â”‚    837.7 MB
 1 â”‚ remote   â”‚ 10.143.200.102:8091 â”‚ healthy â”‚ indexing,kv,query â”‚ 6.5.0-4960-enterprise â”‚ x86_64-unknown-linux-gnu â”‚       2.1 GB â”‚      1.0 GB
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reading_and_writing_documents">4.5. Reading and Writing `doc`uments</h3>
<div class="paragraph">
<p>The fastest way to interact with documents is through the key value service (as long as you know the document ID).
All those commands are located as subcommands under the <code>doc</code> namespace.</p>
</div>
<div class="sect3">
<h4 id="_reading">4.5.1. Reading</h4>
<div class="paragraph">
<p>You can retrieve a document with <code>doc get</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airline_10
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚     id     â”‚      content      â”‚         cas         â”‚ error â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airline_10 â”‚ {record 7 fields} â”‚ 1681456999724089344 â”‚       â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>To distinguish the actual content from the metadata, the content is nested in the <code>content</code> field.
If you want to have everything at the toplevel, you can pipe to the <code>flatten</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airline_10 | flatten
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚     id     â”‚ callsign â”‚    country    â”‚ iata â”‚ icao â”‚ content_id â”‚    name     â”‚  type   â”‚         cas         â”‚ error â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airline_10 â”‚ MILE-AIR â”‚ United States â”‚ Q5   â”‚ MLA  â”‚         10 â”‚ 40-Mile Air â”‚ airline â”‚ 1681456999724089344 â”‚       â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the document is not found, an empty result is returned.</p>
</div>
<div class="paragraph">
<p>To perform a bulk get operation, the incoming stream can be utilized.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; echo [airline_10 airline_10748 airline_137] | wrap id | doc get
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      id       â”‚      content      â”‚         cas         â”‚ error â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airline_10    â”‚ {record 7 fields} â”‚ 1681456999724089344 â”‚       â”‚ dev.local â”‚
â”‚ 1 â”‚ airline_10748 â”‚ {record 7 fields} â”‚ 1681456996753211392 â”‚       â”‚ dev.local â”‚
â”‚ 2 â”‚ airline_137   â”‚ {record 7 fields} â”‚ 1681457004278579200 â”‚       â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>doc get</code> operates on an incoming stream it will extract the document id from the <code>id</code> column.
This behavior can be customized through the <code>--id-column</code> flag.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutating">4.5.2. Mutating</h4>
<div class="paragraph">
<p>Documents can be mutated with <code>doc insert</code>, <code>doc upsert</code> and <code>doc replace</code>.</p>
</div>
<div class="paragraph">
<p>All those three commands take similar arguments. If you only want to mutate a single document, passing in the ID and the content as arguments is the simplest way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc upsert my-doc {&quot;hello&quot;: &quot;world&quot;}
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple documents can be mutated through an input stream as well, defaulting to the <code>id</code> and <code>content</code> columns:</p>
</div>
</div>
<div class="sect3">
<h4 id="_removing">4.5.3. Removing</h4>
<div class="paragraph">
<p>Documents can be removed with <code>doc remove</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc remove airline_10
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar to <code>doc get</code>, if you want to delete more than one document at the same time, provide a stream of ids with an <code>id</code> column:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; echo [airline_10 airline_10748 airline_137] | wrap id | doc remove
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚   failures    â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         3 â”‚       2 â”‚      1 â”‚ Key not found â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_version">4.6. <code>version</code></h3>
<div class="paragraph">
<p>The <code>version</code> command lists the version of the couchbase shell.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; version
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ version â”‚ 0.75.1 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference">5. Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_config_file_format">5.1. Config File Format</h3>
<div class="paragraph">
<p>The <code>~/.cbsh/config</code> file with examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="toml"># Allows us to evolve in the future without breaking old config files
version = 1

[[database]]
identifier = &quot;default&quot;
connstr = &quot;127.0.0.1&quot;
default-bucket = &quot;travel-sample&quot;
default-scope = &quot;my-scope&quot;
default-collection = &quot;my-collection&quot;
# The following can be part of the config or credentials
username = &quot;Administrator&quot;
password = &quot;password&quot;
# TLS defaults to on
# tls-enabled = false
# tls-cert-path = &quot;/path/to/cert&quot; # either accept all certs or provide a cert path
# tls-accept-all-certs = true
# tls-validate-hostnames = false

# User display name is optional and is used to display a different name to the username in the prompt itself.
# This can be useful if the username that you are provided is a long randomly generated string or similar.
# user-display-name = &quot;Charlie&quot;

# Timeouts broadly apply to the operations that you would expect them to.
# That is:
# * data: commands using the kv service such as `doc`
# * query: `query` commands
# * analytics: `analytics` commands
# * search: `search` commands
# * management: commands that perform management level operations, such as `users`, `bucket`, `health` etc...
data-timeout = &quot;10s&quot;
query-timeout = &quot;75s&quot;
analytics-timeout = &quot;75s&quot;
search-timeout = &quot;1m 15s&quot;
management-timeout = &quot;75s&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_credentials_file_format">5.2. Credentials File Format</h3>
<div class="paragraph">
<p>The optional <code>~/.cbsh/credentials</code> file with examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="toml"># Allows us to evolve in the future without breaking old config files
version = 1

[[database]]
identifier = &quot;default&quot;
username = &quot;Administrator&quot;
password = &quot;password&quot;
# TLS defaults to on, accepting all certs
# tls-enabled = true
# tls-cert-path = &quot;/path/to/cert&quot; # either accept all certs or provide a cert path
# tls-accept-all-certs = true
# tls-validate-hostnames = false</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recipes">6. Recipes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_importing_data">6.1. Importing data</h3>
<div class="paragraph">
<p>Couchbase Shell supports loading data from a variety of formats and sources.</p>
</div>
<div class="paragraph">
<p>The simplest way to import data is using <code>doc import</code> as covered in <a href="../intro.html">Loading data into the shell</a>.
These recipes will cover more advanced usecases.</p>
</div>
<div class="sect3">
<h4 id="_a_note_on_data_format">6.1.1. A Note On Data format</h4>
<div class="paragraph">
<p>The <code>doc upsert</code> command requires there to be only two fields/columns for an upsert.
There can be more than two fields/columns in the data but only two can be used.
By default, these two columns are named <code>id</code> and <code>content</code>, but these can be overridden with <code>--id-column</code> and <code>--content-column</code>.</p>
</div>
<div class="paragraph">
<p>Given the following document format we need to perform some data manipulation to get it into a format which works with <code>doc upsert</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat mydoc.json
{&quot;id&quot;:3719,&quot;cas&quot;:1600344369374167040,&quot;type&quot;:&quot;airport&quot;,&quot;airportname&quot;:&quot;Columbia Rgnl&quot;,&quot;city&quot;:&quot;Columbia&quot;,&quot;country&quot;:&quot;United States&quot;,&quot;faa&quot;:&quot;COU&quot;,&quot;icao&quot;:&quot;KCOU&quot;,&quot;tz&quot;:&quot;America/Chicago&quot;}

&gt; open mydoc.json | wrap content | insert id { |it| echo $it.content.airportname }
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ content â”‚ {record 9 fields} â”‚
â”‚ id      â”‚ Columbia Rgnl     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_from_file">6.1.2. From file</h4>
<div class="sect4">
<h5 id="_from_json">From JSON</h5>
<div class="paragraph">
<p>Single Document</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat mydoc.json
{&quot;id&quot;:3719,&quot;cas&quot;:1600344369374167040,&quot;type&quot;:&quot;airport&quot;,&quot;airportname&quot;:&quot;Columbia Rgnl&quot;,&quot;city&quot;:&quot;Columbia&quot;,&quot;country&quot;:&quot;United States&quot;,&quot;faa&quot;:&quot;COU&quot;,&quot;icao&quot;:&quot;KCOU&quot;,&quot;tz&quot;:&quot;America/Chicago&quot;}

&gt; open mydoc.json | wrap content | insert id { |it|  echo $it.content.airportname } | doc upsert
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple Documents</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; ls airports
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # â”‚            name            â”‚ type â”‚ size  â”‚  modified
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ airports/airport_3719.json â”‚ File â”‚ 151 B â”‚ 2 days ago
 1 â”‚ airports/airport_3720.json â”‚ File â”‚ 155 B â”‚ 2 days ago
 2 â”‚ airports/airport_3721.json â”‚ File â”‚ 172 B â”‚ 2 days ago
 3 â”‚ airports/airport_3722.json â”‚ File â”‚ 161 B â”‚ 2 days ago
 4 â”‚ airports/airport_3723.json â”‚ File â”‚ 163 B â”‚ 2 days ago
 5 â”‚ airports/airport_3724.json â”‚ File â”‚ 156 B â”‚ 2 days ago
 6 â”‚ airports/airport_3725.json â”‚ File â”‚ 148 B â”‚ 2 days ago
 7 â”‚ airports/airport_3726.json â”‚ File â”‚ 164 B â”‚ 2 days ago
 8 â”‚ airports/airport_3727.json â”‚ File â”‚ 169 B â”‚ 2 days ago
 9 â”‚ airports/airport_3728.json â”‚ File â”‚ 152 B â”‚ 2 days ago
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

&gt; open airports/airport_3719.json
â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 # â”‚  id  â”‚  type   â”‚ airportname â”‚   city   â”‚ country â”‚ faa â”‚ icao â”‚      tz
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0 â”‚ 3719 â”‚ airport â”‚ Columbia    â”‚ Columbia â”‚ United  â”‚ COU â”‚ KCOU â”‚ America/Chic
   â”‚      â”‚         â”‚ Rgnl        â”‚          â”‚ States  â”‚     â”‚      â”‚ ago
â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

&gt; ls airports/ | each { |it| open $it.name | wrap content | insert id { |doc| echo $doc.content.airportname} } | doc upsert
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚        10 â”‚      10 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_from_csv">From CSV</h5>
<div class="paragraph">
<p>Single Document</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat mydoc.csv
id,cas,type,airportname,city,country,faa,icao,tz
3719,1600344369374167040,airport,Columbia Rgnl,Columbia,United States,COU,KCOU,America/Chicago

&gt; open mydoc.csv | each { |it| wrap content | insert id { |doc| echo $doc.content.airportname} } | doc upsert
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚         1 â”‚       1 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple Documents</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat airports.csv
airportname,city,country,faa,icao,id,type,tz
Calais Dunkerque,Calais,France,CQF,LFAC,1254,airport,Europe/Paris
Peronne St Quentin,Peronne,France,,LFAG,1255,airport,Europe/Paris
Les Loges,Nangis,France,,LFAI,1256,airport,Europe/Paris
Couterne,Bagnole-de-l'orne,France,,LFAO,1257,airport,Europe/Paris
Bray,Albert,France,,LFAQ,1258,airport,Europe/Paris

&gt;  open mydoc.csv | each { |it| wrap content | insert id { |doc| echo $doc.content.airportname }  } | doc upsert
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚ processed â”‚ success â”‚ failed â”‚ failures â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚        10 â”‚      10 â”‚      0 â”‚          â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modifying_data">6.1.3. Modifying data</h4>
<div class="paragraph">
<p>In some circumstances you may want to modify the data before you import it.
Let&#8217;s take the example of importing from a csv file but this time the airports.csv file is missing the <code>type</code> column but we want to add it to our data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cat airports.csv
airportname,city,country,faa,icao,id,tz
Calais Dunkerque,Calais,France,CQF,LFAC,1254,Europe/Paris
Peronne St Quentin,Peronne,France,,LFAG,1255,Europe/Paris
Les Loges,Nangis,France,,LFAI,1256,Europe/Paris
Couterne,Bagnole-de-l'orne,France,,LFAO,1257,Europe/Paris
Bray,Albert,France,,LFAQ,1258,Europe/Paris

&gt; open airports.csv | insert type airport
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚    airportname     â”‚       city        â”‚ country â”‚ faa â”‚ icao â”‚  id  â”‚      tz      â”‚  type   â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Calais Dunkerque   â”‚ Calais            â”‚ France  â”‚ CQF â”‚ LFAC â”‚ 1254 â”‚ Europe/Paris â”‚ airport â”‚
â”‚ 1 â”‚ Peronne St Quentin â”‚ Peronne           â”‚ France  â”‚     â”‚ LFAG â”‚ 1255 â”‚ Europe/Paris â”‚ airport â”‚
â”‚ 2 â”‚ Les Loges          â”‚ Nangis            â”‚ France  â”‚     â”‚ LFAI â”‚ 1256 â”‚ Europe/Paris â”‚ airport â”‚
â”‚ 3 â”‚ Couterne           â”‚ Bagnole-de-l'orne â”‚ France  â”‚     â”‚ LFAO â”‚ 1257 â”‚ Europe/Paris â”‚ airport â”‚
â”‚ 4 â”‚ Bray               â”‚ Albert            â”‚ France  â”‚     â”‚ LFAQ â”‚ 1258 â”‚ Europe/Paris â”‚ airport â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also add a column based on data from other columns, for instance adding a <code>type</code> column which is set to the relevant country:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; open airports.csv | each { |it| insert type $it.city }
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚    airportname     â”‚       city        â”‚ country â”‚ faa â”‚ icao â”‚  id  â”‚      tz      â”‚       type        â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Calais Dunkerque   â”‚ Calais            â”‚ France  â”‚ CQF â”‚ LFAC â”‚ 1254 â”‚ Europe/Paris â”‚ Calais            â”‚
â”‚ 1 â”‚ Peronne St Quentin â”‚ Peronne           â”‚ France  â”‚     â”‚ LFAG â”‚ 1255 â”‚ Europe/Paris â”‚ Peronne           â”‚
â”‚ 2 â”‚ Les Loges          â”‚ Nangis            â”‚ France  â”‚     â”‚ LFAI â”‚ 1256 â”‚ Europe/Paris â”‚ Nangis            â”‚
â”‚ 3 â”‚ Couterne           â”‚ Bagnole-de-l'orne â”‚ France  â”‚     â”‚ LFAO â”‚ 1257 â”‚ Europe/Paris â”‚ Bagnole-de-l'orne â”‚
â”‚ 4 â”‚ Bray               â”‚ Albert            â”‚ France  â”‚     â”‚ LFAQ â”‚ 1258 â”‚ Europe/Paris â”‚ Albert            â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exporting_data">6.2. Exporting data</h3>
<div class="paragraph">
<p>Couchbase Shell supports exporting data to a variety of formats and sources.</p>
</div>
<div class="sect3">
<h4 id="_a_note_on_data_format_2">6.2.1. A Note On Data format</h4>
<div class="paragraph">
<p>The <code>doc get</code> command exposes data as three fields; <code>id</code>, <code>cas</code>, and <code>content</code>.
The body of the document is stored within the <code>content</code> column.
If you want to only store the document body then you can use <code>doc get &lt;id&gt; | get content</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_to_file">6.2.2. To file</h4>
<div class="sect4">
<h5 id="_to_json">To JSON</h5>
<div class="paragraph">
<p>From KeyValue</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airport_3719 --bucket travel-sample
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      id      â”‚      content      â”‚         cas         â”‚ error â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_3719 â”‚ {record 9 fields} â”‚ 1681456998755270656 â”‚       â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

&gt; doc get airport_3719 | get content | save mydoc.json
&gt; cat mydoc.json
{&quot;airportname&quot;:&quot;Columbia Rgnl&quot;,&quot;city&quot;:&quot;Columbia&quot;,&quot;country&quot;:&quot;United States&quot;,&quot;faa&quot;:&quot;COU&quot;,&quot;geo&quot;:{&quot;alt&quot;:889.0,&quot;lat&quot;:38.818094,&quot;lon&quot;:-92.219631},&quot;icao&quot;:&quot;KCOU&quot;,&quot;id&quot;:3719,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;America/Chicago&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>From Query/Analytics</p>
</div>
<div class="paragraph">
<p>To Single Document</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; query &quot;SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5&quot;
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚    airportname     â”‚       city        â”‚ country â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚      tz      â”‚ database  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Calais Dunkerque   â”‚ Calais            â”‚ France  â”‚ CQF â”‚ {record 3 fields} â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 1 â”‚ Peronne St Quentin â”‚ Peronne           â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAG â”‚ 1255 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 2 â”‚ Les Loges          â”‚ Nangis            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAI â”‚ 1256 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 3 â”‚ Couterne           â”‚ Bagnole-de-l'orne â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 4 â”‚ Bray               â”‚ Albert            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

&gt; query &quot;SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5&quot; | save airports.json
&gt; cat airports.json
[{&quot;airportname&quot;:&quot;Calais Dunkerque&quot;,&quot;city&quot;:&quot;Calais&quot;,&quot;country&quot;:&quot;France&quot;,&quot;faa&quot;:&quot;CQF&quot;,&quot;geo&quot;:{&quot;alt&quot;:12,&quot;lat&quot;:50.962097,&quot;lon&quot;:1.9547640000000002},&quot;icao&quot;:&quot;LFAC&quot;,&quot;id&quot;:1254,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;Europe/Paris&quot;},{&quot;airportname&quot;:&quot;Peronne St Quentin&quot;,&quot;city&quot;:&quot;Peronne&quot;,&quot;country&quot;:&quot;France&quot;,&quot;faa&quot;:null,&quot;geo&quot;:{&quot;alt&quot;:295,&quot;lat&quot;:49.868547,&quot;lon&quot;:3.0295780000000003},&quot;icao&quot;:&quot;LFAG&quot;,&quot;id&quot;:1255,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;Europe/Paris&quot;},{&quot;airportname&quot;:&quot;Les Loges&quot;,&quot;city&quot;:&quot;Nangis&quot;,&quot;country&quot;:&quot;France&quot;,&quot;faa&quot;:null,&quot;geo&quot;:{&quot;alt&quot;:428,&quot;lat&quot;:48.596219,&quot;lon&quot;:3.0067860000000004},&quot;icao&quot;:&quot;LFAI&quot;,&quot;id&quot;:1256,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;Europe/Paris&quot;},{&quot;airportname&quot;:&quot;Couterne&quot;,&quot;city&quot;:&quot;Bagnole-de-l'orne&quot;,&quot;country&quot;:&quot;France&quot;,&quot;faa&quot;:null,&quot;geo&quot;:{&quot;alt&quot;:718,&quot;lat&quot;:48.545836,&quot;lon&quot;:-0.387444},&quot;icao&quot;:&quot;LFAO&quot;,&quot;id&quot;:1257,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;Europe/Paris&quot;},{&quot;airportname&quot;:&quot;Bray&quot;,&quot;city&quot;:&quot;Albert&quot;,&quot;country&quot;:&quot;France&quot;,&quot;faa&quot;:null,&quot;geo&quot;:{&quot;alt&quot;:364,&quot;lat&quot;:49.971531,&quot;lon&quot;:2.697661},&quot;icao&quot;:&quot;LFAQ&quot;,&quot;id&quot;:1258,&quot;type&quot;:&quot;airport&quot;,&quot;tz&quot;:&quot;Europe/Paris&quot;}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To Multiple Documents</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; query &quot;SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5&quot;
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚    airportname     â”‚       city        â”‚ country â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚      tz      â”‚ database  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Calais Dunkerque   â”‚ Calais            â”‚ France  â”‚ CQF â”‚ {record 3 fields} â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 1 â”‚ Peronne St Quentin â”‚ Peronne           â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAG â”‚ 1255 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 2 â”‚ Les Loges          â”‚ Nangis            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAI â”‚ 1256 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 3 â”‚ Couterne           â”‚ Bagnole-de-l'orne â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 4 â”‚ Bray               â”‚ Albert            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

&gt; query &quot;SELECT `travel-sample`.* FROM `travel-sample` WHERE `type`='airport' LIMIT 5&quot; | each { |it| echo $it | save (echo ([&quot;airport_&quot;, $it.id ,&quot;.json&quot;] | str join)) }
&gt; ls airport*.json
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚       name        â”‚ type â”‚ size  â”‚ modified â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_1254.json â”‚ file â”‚ 277 B â”‚ now      â”‚
â”‚ 1 â”‚ airport_1255.json â”‚ file â”‚ 280 B â”‚ now      â”‚
â”‚ 2 â”‚ airport_1256.json â”‚ file â”‚ 270 B â”‚ now      â”‚
â”‚ 3 â”‚ airport_1257.json â”‚ file â”‚ 281 B â”‚ now      â”‚
â”‚ 4 â”‚ airport_1258.json â”‚ file â”‚ 265 B â”‚ now      â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_to_csv">To CSV</h5>
<div class="paragraph">
<p>From KeyValue</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airport_3719 --bucket travel-sample
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚      id      â”‚      content      â”‚         cas         â”‚ error â”‚  cluster  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ airport_3719 â”‚ {record 9 fields} â”‚ 1681456998755270656 â”‚       â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

&gt; doc get airport_3719 --bucket travel-sample | get content
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  airportname  â”‚   city   â”‚    country    â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚       tz        â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Columbia Rgnl â”‚ Columbia â”‚ United States â”‚ COU â”‚ {record 3 fields} â”‚ KCOU â”‚ 3719 â”‚ airport â”‚ America/Chicago â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>geo</code> column in the above data contains a <code>record</code>, which means that the data is nested.
This means that we have to flatten out the <code>geo</code> column due to limitations of the csv format.
If we try to import the content as it is then we will see:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airport_3719 --bucket travel-sample | get content | to csv
Error: nu::shell::cant_convert (link)

  Ã— Can't convert to CSV.
   â•­â”€[entry #25:1:1]
 1 â”‚ doc get airport_3719 --bucket travel-sample | get content | to csv
   Â· â”€â”€â”€â”¬â”€â”€â”€
   Â·    â•°â”€â”€ can't convert table&lt;airportname: string, city: string, country: string, faa: string, geo: record&lt;alt: float, lat: float, lon: float&gt;, icao: string, id: int, type: string, tz: string&gt; to CSV
   â•°â”€â”€â”€â”€</code></pre>
</div>
</div>
<div class="paragraph">
<p>To flatten out the data we can simply use the <code>flatten</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airport_3719 --bucket travel-sample | get content | flatten
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚  airportname  â”‚   city   â”‚    country    â”‚ faa â”‚   alt    â”‚   lat   â”‚   lon    â”‚ icao â”‚  id  â”‚  type   â”‚       tz        â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Columbia Rgnl â”‚ Columbia â”‚ United States â”‚ COU â”‚ 889.0000 â”‚ 38.8181 â”‚ -92.2196 â”‚ KCOU â”‚ 3719 â”‚ airport â”‚ America/Chicago â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which we can then pipe to save:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; doc get airport_3719 --bucket travel-sample | get content | flatten | save mydoc.csv
&gt; cat mydoc.csv
airportname,city,country,faa,alt,lat,lon,icao,id,type,tz
Columbia Rgnl,Columbia,United States,COU,889,38.818094,-92.219631,KCOU,3719,airport,America/Chicago</code></pre>
</div>
</div>
<div class="paragraph">
<p>From Query/Analytics</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; query &quot;SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5&quot;
â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # â”‚    airportname     â”‚       city        â”‚ country â”‚ faa â”‚        geo        â”‚ icao â”‚  id  â”‚  type   â”‚      tz      â”‚ database  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0 â”‚ Calais Dunkerque   â”‚ Calais            â”‚ France  â”‚ CQF â”‚ {record 3 fields} â”‚ LFAC â”‚ 1254 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 1 â”‚ Peronne St Quentin â”‚ Peronne           â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAG â”‚ 1255 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 2 â”‚ Les Loges          â”‚ Nangis            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAI â”‚ 1256 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 3 â”‚ Couterne           â”‚ Bagnole-de-l'orne â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAO â”‚ 1257 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â”‚ 4 â”‚ Bray               â”‚ Albert            â”‚ France  â”‚     â”‚ {record 3 fields} â”‚ LFAQ â”‚ 1258 â”‚ airport â”‚ Europe/Paris â”‚ dev.local â”‚
â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar to the above we need to flatten out the <code>geo</code> data before we can save this to csv:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; query &quot;SELECT `travel-sample`.* from `travel-sample` WHERE `type`='airport' LIMIT 5&quot; | flatten | save mydoc.csv</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_useful_snippets">6.3. Useful snippets</h3>
<div class="paragraph">
<p>This section contains a collection of useful commands and sets of commands which don&#8217;t really fit into their own section of recipes.</p>
</div>
<div class="sect3">
<h4 id="_migrating_scope_and_collection_definitions">6.3.1. Migrating scope and collection definitions</h4>
<div class="paragraph">
<p>When you create a new cluster it can be useful to migrate scope and collection definitions from an old cluster.
A good example here is migrating from an on-premise cluster to a Capella cluster.</p>
</div>
<div class="paragraph">
<p>To migrate scopes, except the <code>_default</code> scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>scopes --databases &quot;On-Prem-Cluster&quot; --bucket travel-sample | select scope | where scope != &quot;_default&quot; | each { |it| scopes create $it.scope --databases &quot;Capella-Cluster&quot; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>To migrate all collections, except the <code>_default</code> collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>collections --databases &quot;On-Prem-Cluster&quot; --bucket &quot;travel-sample&quot; | select scope collection | where $it.scope != &quot;_default&quot; | where $it.collection != &quot;_default&quot; | each { |it| collections create $it.collection --databases &quot;Capella-Cluster&quot; --bucket &quot;travel-sample-import&quot; --scope $it.scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>These examples can easily be extended to filter out any other scopes and collections you do not want to migrate.
For example to filter more scopes you would just add more <code>where</code> clauses: <code>&#8230;&#8203; | where scope != "_default" | where scope != "inventory" | &#8230;&#8203;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_migrating_query_index_definitions">6.3.2. Migrating query index definitions</h4>
<div class="paragraph">
<p>When you create a new cluster it can be useful to migrate index definitions from an old cluster.
A good example here is migrating from an on-premise cluster to a Capella cluster.</p>
</div>
<div class="paragraph">
<p>To migrate all of your index definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>query indexes --definitions --databases &quot;On-Prem-Cluster&quot; | get definition | each { |it| query $it --databases &quot;Capella-Cluster&quot; }</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_release_notes">7. Release Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_0_75_1_2023_04_13">7.1. 0.75.1 - 2023-04-13</h3>
<div class="paragraph">
<p><strong>This release contains a number of breaking changes, which are explicitly called out below.</strong>
As our versioning continues to track the underlying Nushell minor version this has required breaking changes in a patch version.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updated config file to rename <code><a id="cluster"></a></code> to <code><a id="database"></a></code> (<code><a id="cluster"></a></code> will continue to work).</p>
</li>
<li>
<p><strong>Breaking</strong> Updated config file to rename <code>hostnames</code> to <code>connstr</code> and changed the format to be a string.</p>
</li>
<li>
<p>Added support, and detection, for different "cluster types"; Capella and Other. This allows us to modify behaviour based on cluster type.</p>
</li>
<li>
<p><strong>Breaking</strong> Renamed <code>clusters health</code> to <code>health</code>.</p>
</li>
<li>
<p><strong>Breaking</strong> Renamed other <code>clusters &#8230;&#8203;</code> commands to <code>database &#8230;&#8203;</code></p>
</li>
<li>
<p>Replaced references to cluster with database.</p>
</li>
<li>
<p><strong>Breaking</strong> Removed support for whoami</p>
</li>
<li>
<p>Added support for username aliases - added <code>display_name</code> to config.</p>
</li>
<li>
<p>Trust the system store and Capella root CA when no certificate set.</p>
</li>
<li>
<p>Updated tutorial.</p>
</li>
<li>
<p>Added support for generating a config file when one does not exist.</p>
</li>
<li>
<p>Added support for connecting to kv nodes in parallel.</p>
</li>
<li>
<p>Added support for <code>doc import</code> command.</p>
</li>
<li>
<p>Added prompt indicator to help distinguish if a Capella or "other" cluster type is in use.</p>
</li>
<li>
<p>Fast fail <code>buckets</code> commands when used with Capella.</p>
</li>
<li>
<p>Updated where config files are automatically written to.</p>
</li>
<li>
<p>Fixed issue with config.nu file on Windows.</p>
<div class="ulist">
<ul>
<li>
<p>Pulled all beta and alpha release versions and updated version numbering</p>
</li>
<li>
<p>Couchbase Shell versions will now map to the Nushell version being used</p>
</li>
<li>
<p>Bundle Capella root CA to allow seamlessly connecting over TLS</p>
</li>
<li>
<p>Automatically detect when <code>query_context</code> should be sent</p>
</li>
<li>
<p>Update when SRV lookups are performed</p>
</li>
<li>
<p>Statically link OpenSSL</p>
</li>
<li>
<p>Various logging and error enhancements</p>
</li>
<li>
<p>Remove support for Capella InVpc</p>
</li>
<li>
<p>Renamed <code>clusters managed</code> to <code>cb-env managed</code></p>
</li>
<li>
<p>Renamed <code>clusters register/unregister</code> to <code>cb-env register/unregister</code></p>
</li>
<li>
<p>Expose CIDR in result of <code>clusters</code></p>
</li>
<li>
<p>Fetch collection id over memcached rather than http</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_0_75_0_2023_02_09">7.2. 0.75.0 - 2023-02-09</h3>
<div class="ulist">
<ul>
<li>
<p>Nushell pinned to 0.75</p>
</li>
<li>
<p>Pulled all beta and alpha release versions and updated version numbering</p>
</li>
<li>
<p>Couchbase Shell versions will now map to the Nushell version being used</p>
</li>
<li>
<p>Bundle Capella root CA to allow seamlessly connecting over TLS</p>
</li>
<li>
<p>Automatically detect when <code>query_context</code> should be sent</p>
</li>
<li>
<p>Update when SRV lookups are performed</p>
</li>
<li>
<p>Statically link OpenSSL</p>
</li>
<li>
<p>Various logging and error enhancements</p>
</li>
<li>
<p>Remove support for Capella InVpc</p>
</li>
<li>
<p>Renamed <code>clusters managed</code> to <code>cb-env managed</code></p>
</li>
<li>
<p>Renamed <code>clusters register/unregister</code> to <code>cb-env register/unregister</code></p>
</li>
<li>
<p>Expose CIDR in result of <code>clusters</code></p>
</li>
<li>
<p>Fetch collection id over memcached rather than http</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-18 09:14:59 UTC
</div>
</div>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MVPNN2');</script>
      <script>
        if (window.self === window.top) {
          var s = document.createElement("script");
          s.src = "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";
          s.setAttribute("data-domain-script", "748511ff-10bf-44bf-88b8-36382e5b5fd9");
          document.body.appendChild(s);
        }
      </script>
      <script type="text/javascript">
        function OptanonWrapper() { }
      </script>
</body>
</html>